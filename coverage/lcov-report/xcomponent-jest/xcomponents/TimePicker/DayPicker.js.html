<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for xcomponent-jest/xcomponents/TimePicker/DayPicker.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../index.html">All files</a> / <a href="index.html">xcomponent-jest/xcomponents/TimePicker</a> DayPicker.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/29</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/22</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/12</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/28</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import React from 'react';
import {$_date} from 'services';
import DayPickerInput from 'react-day-picker/DayPickerInput';
import {DateUtils} from 'react-day-picker';
import {XIcon} from 'xcomponents';
&nbsp;
// const currentYear = new Date().getFullYear();
// const fromMonth = new Date(currentYear - 10, 0);
// const toMonth = new Date(currentYear + 10, 11);
&nbsp;
function <span class="fstat-no" title="function not covered" >YearMonthForm(</span>{date, localeUtils, onChange,minYear, maxYear}) {
    const currentYear = <span class="cstat-no" title="statement not covered" >new Date().getFullYear();</span>
    const fromMonth = <span class="cstat-no" title="statement not covered" >new Date(new Date(minYear).getFullYear() || currentYear, 0);</span>
    const toMonth = <span class="cstat-no" title="statement not covered" >new Date(new Date(maxYear).getFullYear() || currentYear + 10, 11);</span>
&nbsp;
    const months = <span class="cstat-no" title="statement not covered" >localeUtils.getMonths();</span>
&nbsp;
    const years = <span class="cstat-no" title="statement not covered" >[];</span>
<span class="cstat-no" title="statement not covered" >    for (let i = fromMonth.getFullYear(); i &lt;= toMonth.getFullYear(); i += 1) {</span>
<span class="cstat-no" title="statement not covered" >        years.push(i);</span>
    }
&nbsp;
    const handleChange = <span class="cstat-no" title="statement not covered" >function <span class="fstat-no" title="function not covered" >handleChange(</span>e) {</span>
        const {year, month} = <span class="cstat-no" title="statement not covered" >e.target.form;</span>
<span class="cstat-no" title="statement not covered" >        onChange(new Date(year.value, month.value));</span>
    };
&nbsp;
<span class="cstat-no" title="statement not covered" >    return (</span>
        &lt;form className="DayPicker-Caption"&gt;
            &lt;select key="month" name="month" onChange={handleChange} value={date.getMonth()}&gt;
                {$_date._i18n.months.map(<span class="fstat-no" title="function not covered" >(m</span>onth, i) =&gt; {
<span class="cstat-no" title="statement not covered" >                    return (&lt;option key={month} value={i}&gt;</span>
                        {month}
                    &lt;/option&gt;)
                })}
            &lt;/select&gt;
            &lt;select key="year" name="year" onChange={handleChange} value={date.getFullYear()}&gt;
                {years.map(<span class="fstat-no" title="function not covered" >ye</span>ar =&gt; (
<span class="cstat-no" title="statement not covered" >                    &lt;option key={year} value={year}&gt;</span>
                        {year}
                    &lt;/option&gt;
                ))}
            &lt;/select&gt;
        &lt;/form&gt;
    );
}
&nbsp;
&nbsp;
export default class extends React.Component {
<span class="fstat-no" title="function not covered" >    co</span>nstructor(props) {
<span class="cstat-no" title="statement not covered" >        super(props);</span>
<span class="cstat-no" title="statement not covered" >        this.handleDayClick = this.handleDayClick.bind(this);</span>
<span class="cstat-no" title="statement not covered" >        this.handleYearMonthChange = this.handleYearMonthChange.bind(this);</span>
<span class="cstat-no" title="statement not covered" >        this.state = {</span>
            month: this.props.value ? new Date(this.props.value) : '',
            from: undefined,
            to: undefined,
            date: this.props.value ? new Date(this.props.value) : ''
        };
<span class="cstat-no" title="statement not covered" >        this.format = 'YYYY/MM/DD';</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    UN</span>SAFE_componentWillReceiveProps(newProps) {
<span class="cstat-no" title="statement not covered" >        this.setState({</span>
            month: newProps.value ? new Date(newProps.value) : '',
            date: newProps.value ? new Date(newProps.value) : ''
        });
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    ha</span>ndleDayClick(day) {
        const range = <span class="cstat-no" title="statement not covered" >DateUtils.addDayToRange(day, this.state);</span>
<span class="cstat-no" title="statement not covered" >        this.setState(range);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    ha</span>ndleYearMonthChange(month) {
<span class="cstat-no" title="statement not covered" >        this.setState({month});</span>
    }
&nbsp;
&nbsp;
<span class="fstat-no" title="function not covered" >    re</span>nder() {
        const {maxDate, minDate} = <span class="cstat-no" title="statement not covered" >this.props;</span>
&nbsp;
        const range = <span class="cstat-no" title="statement not covered" >{</span>
            after: new Date(maxDate),
            before: new Date(minDate)
        };
&nbsp;
<span class="cstat-no" title="statement not covered" >        return (</span>
            &lt;div className="rayr-day-picker"&gt;
                &lt;DayPickerInput 
                    component={<span class="fstat-no" title="function not covered" >pr</span>ops =&gt; <span class="cstat-no" title="statement not covered" >&lt;input readOnly={true} {...props} /&gt;}</span>
                    key={DayPickerInput} onDayChange={<span class="fstat-no" title="function not covered" >da</span>y =&gt; {<span class="cstat-no" title="statement not covered" >this.props.onChange(day.getTime());<span class="cstat-no" title="statement not covered" >t</span>his.setState({date:day})}</span>}
                    format={this.format}
                    value={this.state.date ? $_date.init(this.format,this.state.date) : ''}
                    placeholder={`${this.props.placeholder || $_date.init(this.format,new Date())}`}
                    dayPickerProps={{
                        disabledDays:range,
                        locale:'zh-cn',
                        months:$_date._i18n.months,
                        weekdaysLong:$_date._i18n.weekdays,
                        weekdaysShort:$_date._i18n.weekdaysShort,
                        firstDayOfWeek:1,
                        month:this.state.month ? this.state.month : new Date(),
                        fromMonth:this.state.date ? this.state.date : new Date(),
                        toMonth:this.state.date ? this.state.date : new Date(),
                        selectedDays: this.state.date,
                        captionElement:<span class="fstat-no" title="function not covered" >({</span> date, localeUtils }) =&gt; (
<span class="cstat-no" title="statement not covered" >                            &lt;YearMonthForm</span>
                            date={date}
                            localeUtils={localeUtils}
                            onChange={this.handleYearMonthChange}
                            nowDate={new Date(this.state.date)}
                            minYear={range.before}
                            maxYear={range.after}
                            /&gt;
                        ),
                        enableOutsideDaysClick: true
                    }
                    }
                /&gt;
                &lt;XIcon type="calendar-a"/&gt;
            &lt;/div&gt;
        );
    }
}
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Sat Dec 29 2018 11:05:35 GMT+0800 (GMT+08:00)
</div>
</div>
<script src="../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../sorter.js"></script>
</body>
</html>
